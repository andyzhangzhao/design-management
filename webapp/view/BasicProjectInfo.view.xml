<mvc:View
	controllerName="projectmanagement.controller.BasicProjectInfo"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:semantic="sap.f.semantic"
    xmlns:f="sap.f"
	xmlns:fb="sap.ui.comp.filterbar"
    xmlns:form="sap.ui.layout.form"
	xmlns:u="sap.ui.unified"
	xmlns:core="sap.ui.core">

	<semantic:SemanticPage
		id="projectBasicInfoPage"
		headerPinnable="false"
		toggleHeaderOnTitleClick="false"
		showFooter="{ui>/editMode}"
		class="basicProjectPage">
		<semantic:titleHeading>
			<Title
				text="项目基本信息"
				level="H2"/>
		</semantic:titleHeading>

		<semantic:titleMainAction>
			<semantic:TitleMainAction id="editAction" text="编辑" visible="{= !${ui>/editMode}}" press='.onEdit'/>
		</semantic:titleMainAction>
		<semantic:titleContent>
			<u:FileUploader
				uploadUrl="/sap/opu/odata/sap/API_CV_ATTACHMENT_SRV/AttachmentContentSet"
				mimeType="image/png,image/jpeg"
				fileType="jpg,png"
				name="file"
				uploadOnChange='false'
				buttonOnly="true"
				useMultipart="true"
				sameFilenameAllowed="true"
				maximumFileSize='4'
				sendXHR="true"
				buttonText="上传图片"
				fileSizeExceed='.fileSizeExceed'
				typeMissmatch='.typeMissmatch'
				fileAllowed=".fileAllowed">
			</u:FileUploader>
		</semantic:titleContent>
		<semantic:headerContent>
			<f:GridContainer>
				<f:layout>
					<f:GridContainerSettings rowSize="2rem" columnSize="1.9rem" gap="0.5rem" />
				</f:layout>
				<f:items>
					<Label text="项目编码:" class="labelMargin" >
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="2" />
						</layoutData>
					</Label>
					<Text text="{details>prjid}" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="6" />
						</layoutData>
					</Text>
					<Label text="项目名称:" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="2" />
						</layoutData>
					</Label>
					<Text text="{details>prjnm}" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="6" />
						</layoutData>
					</Text>
					<Label text="项目状态:" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="2" />
						</layoutData>
					</Label>
					<Text text="{details>to_xmtxt/TXT_DESC}" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="6" />
						</layoutData>
					</Text>

					<Label text="项目地址:" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="2" />
						</layoutData>
					</Label>
					<Text text="{details>address}" visible="{= !${ui>/editMode}}" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="22" />
						</layoutData>
					</Text>
					<Input id="projectAddressInput" visible="{ui>/editMode}" value="{details>address}" maxLength="100">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="22" />
						</layoutData>
					</Input>

					<Label text="项目简介:" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="2" columns="2" />
						</layoutData>
					</Label>
					<Text text="{details>prjdesc}" visible="{= !${ui>/editMode}}" class="labelMargin">
						<layoutData>
							<f:GridContainerItemLayoutData rows="8" columns="10" />
						</layoutData>
					</Text>
					<TextArea id="projectDescInput" class="projectDescInput" visible="{ui>/editMode}" value="{details>prjdesc}" width='376px' height="350px">
						<layoutData>
							<f:GridContainerItemLayoutData rows="8" columns="10" />
						</layoutData>
					</TextArea>
					<Image id='projectImage' src="{ui>/imageSrc}" width='450px' height='450px'>
						<layoutData>
							<f:GridContainerItemLayoutData rows="8" columns="12" />
						</layoutData>
					</Image>
				</f:items>
			</f:GridContainer>
		</semantic:headerContent>
        <semantic:titleMainAction>
		</semantic:titleMainAction>
		<semantic:content>
			<Table
                id="basicProjectInfoTable"
                width="auto"
                items="{
                    path: 'details>/ZRRE_c_DMPS',
                    parameters: {
                        $count: true,
						$expand: 'to_mjtxt'
                    }
                }"
                growingThreshold='40'
                growing="true"
                growingScrollToLoad="true"
                sticky="ColumnHeaders,HeaderToolbar"
                class="sapUiMediumMarginBottom"
                updateFinished=".tableUpdateFinished">
                <headerToolbar>
                    <OverflowToolbar>
                        <Title
                            id="tableHeader"
                            text="分期、楼栋、业态信息 ({ui>/basicProjectInfoCount})"
                            level="H3"/>
                        <ToolbarSpacer />
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column id='column1' width='100px'>
                        <Text text="分期编码" />
                    </Column>
                    <Column id='column2' width='100px' >
                        <Text text="分期" />
                    </Column>
                    <Column id='column3' width='100px'>
                        <Text text="主要业态"/>
                    </Column>
                    <Column id='column4' width='100px'>
                        <Text text="楼栋数量" />
                    </Column>
					<Column id='column5' width='100px'>
                        <Text text="建筑面积（万平方）" />
                    </Column>		
					<Column id='column6' width='100px'>
                        <Text text="状态" />
                    </Column>															
                </columns>

                <items>
                    <ColumnListItem>
                        <cells>
                            <Text
                                text="{details>phasid}"/>
                            <Text
                                text="{details>phsnm}"/>
							<HBox>
								<Text visible="{= !${ui>/editMode}}" text="{details>mainyt}"/>
								<Input visible="{ui>/editMode}" value="{details>mainyt}" />
							</HBox>
							<HBox>
								<Text visible="{= !${ui>/editMode}}" text="{details>bld_num}"/>
								<Input visible="{ui>/editMode}" value="{details>bld_num}" type='Number'/>
							</HBox>
							<HBox>
								<Text visible="{= !${ui>/editMode}}" text="{details>cnsetl_area}"/>
								<Input visible="{ui>/editMode}" value="{details>cnsetl_area}" />
							</HBox>
							<Text
                                text="{details>to_mjtxt/RERMJJD_DESC}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
		</semantic:content>

		<semantic:footerMainAction>
			<semantic:FooterMainAction text="保存" press=".onSave"/>
		</semantic:footerMainAction>

		<semantic:footerCustomActions>
			<Button id="cancelAction" text="取消" press=".onCancel"/>
		</semantic:footerCustomActions>

	</semantic:SemanticPage>

</mvc:View>